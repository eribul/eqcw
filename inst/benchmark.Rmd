eq1  <- eq2 <- eq3 <- eq4 <- eq5 <- c(1,2,3)
eq5d <- expand.grid(eq1, eq2, eq3, eq4, eq5)
colnames(eq5d) <- c('eq1', 'eq2', 'eq3', 'eq4', 'eq5')


x  <- dplyr::sample_n(eq5d, 1e6, replace = TRUE)
xm <- as.matrix(x)

rbenchmark::benchmark(
  Erik         = eq2index(x, uk),
  Szilard      = with(x, eqindBrit(eq1, eq2, eq3, eq4, eq5)),
  replications = 1
)

profvis::profvis(eq2index(xm, uk))
profvis::profvis(with(x, eqindBrit(eq1, eq2, eq3, eq4, eq5)))

